# The Hadoop Distributed File System

## HDFS

만약 데이터 하나가 단일 저장소의 저장 용량보다 크다면, 데이터를 적절히 나누어 여러 저장소에 저장해야한다.

**분산 파일 시스템**은 네트워크로 연결된 여러 저장소를 관리하는 파일 시스템이다.

분산 파일 시스템은 네트워크 프로그램의 복잡성을 갖고 있기 때문에 일반적인 파일 시스템보다 훨씬 복잡하다.

<br>

HDFS는 Hadoop Distributed File System으로 **하둡 분산 파일 시스템**이다.

<br>

## Table of Contents

[The Design of HDFS](#The-Design-of-HDFS)

[HDFS Concepts](#HDFS-Concepts)

<br>

## The Design of HDFS

다음은 HDFS의 특성들이다.

- 매우 큰 파일

    - HDFS에서는 페타바이트, 그보다 더 큰 크기의 파일을 다룰 수 있다

- 스트리밍 방식의 데이터 접근

    - ???

- 범용 하드웨어

    - 하둡은 노드 장애가 잦은 범용 하드웨어에서도 문제업이 작업할 수 있다

<br>

다음은 HDFS의 단점, 혹은 적용하기 부적절한 분야들이다.

- 빠른 데이터 응답 시간

    - HDFS는 높은 데이터 처리량에 최적화되어 있고, 이를 위해 응답 시간을 희생했다

- 수많은 작은 파일

    - 약 수십억 개의 파일을 다루는 경우, 하드웨어 용량이 부족하다

- 다중 라이터(Writer)와 파일의 임의 수정

    - HDFS는 단일 라이터를 제공한다

    - HDFS는 파일의 임의 위치 수정은 허용하지 않는다

<br>

## HDFS Concepts

### Blocks

물리적인 디스크는 블록 크기란 개념이 있다.

블록 크기란 한 번에 읽고 쓸 수 있는 최대 크기다.

- 일반적인 파일 시스템 (단일디스크)

    - 파일 시스템 블록 : 디스크 블록 크기의 정배수

    - 수 킬로바이트 : 512바이트

- HDFS (분산 파일 시스템)

    - 128MB 등

<br>

블록 추상화 개념을 도입하면서 얻는 이득은 다음과 같다.

1. 디스크 용량보다 큰 파일을 취급할 수 있다

2. 블록 단위의 추상화는 저장소의 서브시스템을 단순하게 만들 수 있다

<br>

블록은 내고장성(?)과 가용성(??)을 제공하는 데 필요한 복제를 수현할 때 매우 적합하다

<br>

### Namenodes and Datanodes

HDFS 클러스터는 마스터-워커 패턴으로 동작하는 두 종류의 노드가 있다

 - Namenodes (네임노드)

    - 마스터 노드

    - 파일 시스템의 네임스페이스 관리

    - 파일 시스템 트리와 이에 대한 메타 데이터 유지

    - 위 정보는 네임스페이스 이미지와 에디트 로그에 저장 (영속적)

    - 파일에 속한 블록이 저장되어 있는 데이터노드의 위치 파악

    - 해당 위치는 시스템 시작 시 재구성하기 때문에 영속적 저장(X)

 - Datanodes (데이터노드)

    - 블록 저장 및 탐색
    
    - 저장하고 있는 블록의 목록을 주기적으로 네임노드에 보고

<br>

HDFS 클라이언트는 네임노드와 데이터노드 사이에서 통신하고 파일 시스템에 접근한다.

네임노드가 없거나 고장나면 파일시스템은 작동하지 않는다.

하둡은 위와 같은 상황을 막기 위해 아래와 같은 두 가지 기능을 제공한다

1. 파일 시스템의 메타 데이터 백업 기능

2. 보조 네임노드 기능

<br>

### Block Caching

